const player = "p";
const d1 = "H";
const d2 = "T";
const d3 = "C";
const d4 = "P";
const d5 = "L";
const d6 = "h";
const s = "E";
let gameStarted = false;


setLegend(
  [player, bitmap`
................
..000000000000..
.02222222222220.
.02233333332220.
.02232222233220.
.02232222223220.
.02233222223220.
.02222222223220.
.02222233333220.
.02222232222220.
.02222222222220.
.02222232222220.
.02222222222220.
..000000000000..
................
................`],
  [d1, bitmap`
................
..000000000000..
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
.02222233222220.
.02222233222220.
.02222233222220.
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
..000000000000..
................
................`],
  [d2, bitmap`
................
..000000000000..
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
.02233222233220.
.02233222233220.
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
..000000000000..
................
................`],
  [d3, bitmap`
................
..000000000000..
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
.02332233223320.
.02332233223320.
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
.02222222222220.
..000000000000..
................
................`],
  [d4, bitmap`
................
..000000000000..
.02222222222220.
.02222222222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02222222222220.
.02222222222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02222222222220.
..000000000000..
................
................`],
  [d5, bitmap`
................
..000000000000..
.02222222222220.
.02222222222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02222233222220.
.02222233222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02222222222220.
..000000000000..
................
................`],
  [d6, bitmap`
................
..000000000000..
.02222222222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02332222223320.
.02332222223320.
.02222222222220.
.02222222222220.
..000000000000..
................
................`],
  [s, bitmap`
................
..000000000000..
.02222222222220.
.02222222222220.
.02233222233220.
.02233222233220.
.02222222222220.
.02322222222320.
.02332222223320.
.02333333333320.
.02233333332220.
.02222333332220.
.02222222222220.
..000000000000..
................
................`]
);

setSolids([]);
let level = 0;
const levels = [
  map`
.p
..`
];

setMap(levels[level]);
setPushables({
  [player]: []
});

onInput("s", () => {

    if (!gameStarted) {
    console.log("Game started! Press 's' to roll the dice and 'd' to reset.");
    gameStarted = true;
    return;
  }
  
  const result = Math.random() < 0.143 ? d1 : Math.random() < 0.286 ? d2 : Math.random() < 0.429 ? d3 : Math.random() < 0.571 ? d4 : Math.random() < 0.714 ? d5 : Math.random() < 0.857 ? d6 : s;
  setMap(map`${result}`);
  const playerSprite = getFirst(player);
  if (playerSprite) {
    playerSprite.y += 1;
  }
  switch (result) {
    case d1:
      console.log("Dare 1 - Draw something you are thinking about");
      break;
    case d2:
      console.log("Dare 2 - Complete your homework before time");
      break;
    case d3:
      console.log("Dare 3 - Wear a watch in your leg");
      break;
    case d4:
      console.log("Dare 4 - Write hello world in 10 different programming languages");
      break;
    case d5:
      console.log("Dare 5 - Do 25 push-ups with backpack on back");
      break;
    case d6:
      console.log("Dare 6 - Cook something that you don't like to eat");
      break;
    case s:
      for (let i = 1; i <= 10; i++) {
  if (i % 2 == 0) {
    console.log("Mystery Dare : Bad Luck - Do all the dares no matter the consequences");
  } else {
    console.log("Mystery Dare : Good Luck - Roll the Dice Once More After this :) ");
  }
}

      break;
    default:
      console.log("Huh?!");
  }
});

  onInput("d", () => {
  console.log("Game reset! Press 's' to start again.");
  gameStarted = false;
  setMap(levels[level]);
});